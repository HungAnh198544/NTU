<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="With You Once More ♪" />
    <title>■■■</title>
    <style>
      body {
        margin: 0;
        font-family: "Courier New", monospace;
        background-color: #000;
        color: #f00093;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        overflow: hidden;
      }

      #terminal {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-shadow: 0 0 5px #f00093, 0 0 10px rgba(240, 0, 147, 0.5);
      }

      .prompt,
      .message {
        font-size: 2.2em;
        text-align: center;
        white-space: pre-wrap;
        position: relative;
      }

      .prompt::after {
        content: "_";
        animation: blink 1s step-end infinite;
        position: absolute;
      }

      #typed::after {
        content: "_";
        animation: blink 1s step-end infinite;
        position: absolute;
      }

      #typed {
        display: block;
        text-align: center;
      }

      @keyframes blink {
        50% {
          opacity: 0;
        }
      }

      .scanlines {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 4;
        background: repeating-linear-gradient(
          0deg,
          rgba(255, 255, 255, 0.04),
          rgba(255, 255, 255, 0.04) 2px,
          transparent 2px,
          transparent 4px
        );
        animation: scanline-move 15s linear infinite;
        opacity: 1;
      }

      @keyframes scanline-move {
        0% {
          transform: translateY(0);
        }
        100% {
          transform: translateY(4px);
        }
      }

      #copyright {
        position: absolute;
        bottom: 10px;
        font-size: 0.8em;
        color: gray;
        text-align: center;
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <div id="terminal">
      <div id="prompt" class="prompt">Press any key to continue</div>
      <div id="message" class="message" style="display: none">
        <span id="typed"></span>
      </div>
    </div>

    <div class="scanlines"></div>

    <audio id="bg-audio" preload="auto" loop>
      <source src="NewPage-Cdk3jmGc.mp3" type="audio/mpeg" />
    </audio>

    <script>
      const prompt = document.getElementById("prompt");
      const message = document.getElementById("message");
      const typed = document.getElementById("typed");
      const audio = document.getElementById("bg-audio");
      const text = "Mẹo mày bé.";
      let hasTyped = false;

      function startTyping() {
        if (hasTyped) return;
        hasTyped = true;

        let promptText = "Press any key to continue";
        let i = promptText.length;

        function erasePrompt() {
          if (i >= 0) {
            prompt.textContent = promptText.slice(0, i);
            i--;
            setTimeout(erasePrompt, 80);
          } else {
            // Ẩn prompt NGAY khi xóa xong
            prompt.style.visibility = "hidden"; // tạm ẩn, không mất layout
            // hoặc dùng: prompt.style.display = "none";

            // Đợi một chút rồi hiện dòng mới
            setTimeout(() => {
              prompt.style.display = "none"; // ẩn hẳn sau khi chờ
              message.style.display = "block";
              typed.innerHTML = "";

              audio
                .play()
                .catch((err) => console.log("Không thể phát nhạc:", err));

              let j = 0;
              function typeWriter() {
                if (j < text.length) {
                  typed.innerHTML += text[j];
                  j++;
                  setTimeout(typeWriter, 100);
                }
              }
              typeWriter();
            }, 1500); // độ trễ xuất hiện dòng mới
          }
        }

        erasePrompt();
      }

      document.addEventListener("keydown", startTyping);
      document.addEventListener("click", startTyping);
    </script>
  </body>
</html>
